# Chi tiết về Pod trong K8S
- Container thường hướng tới việc giải quyết một vấn đề đơn lẻ, được xác định trong phạm vị hẹp, như là một microservice. Nhưng trong thế giới thực , các vấn đề đỏi hỏi nhiều container cho một giải pháp hoàn chỉnh. Bài viết này sẽ nói tới việc kết hợp nhiều container và trong 1 pod duy nhất của **K8s**, việc này có ý nghĩa gì và các container đó giao tiếp với nhau như thế nào?
# Pod K8s là gì???
- **pod** là đơn vị nhỏ nhất có thể triển khai và quản lý bởi **K8s**. Nói cách khác, nếu bạn cần chạy 1 container duy nhất trong **K8s**thì bạn cũng phải tạo một Pod chứa container đó.
- Một **pod**có thể chứa nhiều hơn 1 container. Các container trong cùng 1 pod dược kết hợp chặt chẽ với nhau. Vậy chúng kết hợp chặt chẽ với nhau như thế nào??? => hãy nghĩ về nó theo cách này: *Các container trong 1 pod đại diện cho các tiến trình mà giống như các tiến trình chạy trên một máy chủ thật.*, hiểu nôm na thì **pod**giống như 1 máy chủ duy nhất.
# Tại sao K8s sử dụng pod là đơn vị triển khai nhỏ nhất mà không phải là container?
- Giả sử rằng triển khai 1 ứng dụng web cần 2 container là `web`và `database`. Để quản lý một container, **K8s** cần bổ sung thông tin, chẳng hạn như chính sách khởi động lại (restart policy), xác định vấn đề cần làm với một container khi nó kết thúc (terminate), ... => Thay vì quả tải việc bổ sung thuộc tính cho những điều đã tồn tại, các kỹ sư **K8s** đã quyết định sử dụng 1 thực thể mới (new entity), đó là **pod**, là một container logic (logically container - wraps (dịch là vỏ bọc)) chứa 1 hoặc nhiều container và được quản lý như 1 thực thể duy nhất.
# Tại sao K8s cho phép nhiều hơn 1 container trong 1 pod?
- Các container trong một pod chạy trên cùng 1 *"logical host"*, chúng sử dụng chung một namesapace (nói cách khác là chung địa chỉ IP và port space), và cùng IPC namespace. Chúng có thể sử dụng chung volume được chia sẻ (shared volume). Những đặc tính này làm cho các container giao tiếp hiệu quả, đảm bảo data locality. Ngoài ra, pod cho phép bạn quản lý nhiều application container được kết hợp chặt chẽ dưới dạng 1 đơn vị duy nhất.
- Vậy nếu một ứng dụng cần vài container chạy trên cùng một host, tại sao không tạo 1 container duy nhất với mọi thứ chúng cần??? Điều tiên chúng có thể vi pham nguyên tắc `mỗi process cho mỗi container`. Điều này quan trọng là bởi vì với nhiều process trong 1 container sẽ gây khó khăn trong việc sửa lỗi container (troubleshoot), vì log từ các process khác nhau sẽ trộn lẫn vào nhau, và nó gây khó khăn hơn cho việc quản lý process lifecycle, ví dụ như quản lý *"zombie processes"* khi tiên trình cha (parent process) bị chết. Thứ 2 là việc sử dụng một vài container cho 1 ứng dụng sẽ đơn giản hơn, minh bạch hơn.
# Kết nối giữa các container trong một pod
## Chia sẻ volume trong 1 pod-k8s
- Trong **K8s**, bạn có thể sử dụng một shared k8s volume một cách đơn giản và hiệu quả để chia sẻ dữ liệu giữa các container trong cùng một pod. Đối với hầu hết các trường hợp, nó đơn giản là sử dụng một thư mục tên máy chủ (host) để chia sẻ cho tất cả các conatainer trong 1 pod.
- 
